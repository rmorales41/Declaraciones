{% extends "paginas/base.html" %}
{% block titulo %} Visor General de Declaraciones  {% endblock %}
{% block contenido %}
{% load static%}

<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.4/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">



<!-- jQuery primero, luego DataTables y Bootstrap Bundle -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.11.4/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>



<!-- Scripts personalizados -->
<script src="{% static 'js/Beneficios.js' %}"></script>

<!-- <body onload="StStatusDeclaraciones()"> -->


<div class="card">
    <div class="col text-right">
            <a href="{% url 'visor' %}" class="btn btn-primary"><i class="fa fa-reply"></i> Volver al menú </a>
             
        <div class="card-body">
        <h4 class="card-title">Visor Global de Declaraciones </h4>      
        <table id="visorglobalgeneral" class="table table-striped" style="width:130%">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Codigo</th>
                        <th scope="col">Detalle</th>
                        <th scope="col">Asignada</th>
                        <th scope="col">Presentar</th>
                        <th scope="col">Tiempo</th> 
                        <th scope="col">Funcionario</th> 
                        <th scope="col">Estado</th>
                        <th scope="col">Observacion</th>
                        <th scope="col">Iniciada</th>
                        <th scope="col">Suspendida</th>                        
                        <th scope="col">ID Cliente</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Correo</th>
                    </tr>
                </thead>
                <tbody>                         
                    {% for a in v_Global %}

                    <tr class="">
                        <td scope="row">{{a.IDDeclaracion}}</td>
                        <td scope="row">{{a.IDDeclaracion__codigo}}</td>
                        <td scope="row">{{a.IDDeclaracion__detalle}}</td>
                        <td scope="row">{{a.Fecha_Asigna}}</td>
                        <td scope="row">{{a.Fecha_Presenta}}</td>
                        <td scope="row">{{a.IDDeclaracion__tiempo}}</td>  
                        <td scope="row">{{a.IDPlanilla_Funcionarios__Nombre}}</td> 
                        <td scope="row">{{a.IDDeclaracion__estado}}</td>  
                        <td scope="row">{{a.IDDeclaracion__observaciones}}</td>  
                        <td scope="row">{{a.Iniciada}}</td>  
                        <td scope="row">{{a.Suspendida}}</td>  
                        <td scope="row">{{a.IDClientes_Proveedores__IDClientes_Proveedores}}</td> 
                        <td scope="row">{{a.IDClientes_Proveedores__Descripcion}}</td> 
                        <td scope="row">{{a.IDClientes_Proveedores__Email}}</td> 
                    </td>
                    {% endfor %}                   
                </tbody>                           
        </table>     
                <!-- paginacion-->                                                       
                {% include "formas/paginacion.html" %} 
        </div> 
    </div>
</div>

<script> 
    // Inicializar DataTable
    $(document).ready(function () {
        $('#visorglobalgeneral').DataTable({
            "language": {
                "url": "{% static 'json/Spanish.json' %}" 
            },
            "searching": true,  // Habilitar búsqueda global
            "ordering": true,    // Habilitar ordenamiento de columnas
            "paging": true,
            "info": true,
            "scrollX": true,
            "scrollY": "430px",
            "responsive": true,
            "autoWidth": true,
            "scrollCollapse": true,
            "stateSave": true, // permite guardar el estado de la tabla 
            "buttons": [
                'copy', 'excel', 'pdf', 'print'
                        ],
            "buttons": [
                   {
                    extend: 'colvis',
                    columns: [0, 1, 2],
                    action: function (e, dt, node, config) {
                    alert('Botón de visibilidad de columnas clicado');
                                }
                    }
                        ]                        
        });
    });
</script>


{% endblock %}

